var cl_mouseWasPressed=!1,cl_lastHovered=null,cl_lastClicked=null,cl_clickables=[];function getTextBounds(t,e,s){let i=document.createElement("span");document.body.appendChild(i),i.style.font=e,i.style.fontSize=s+"px",i.style.height="auto",i.style.width="auto",i.style.position="absolute",i.style.whiteSpace="no-wrap",i.innerHTML=t;let l=Math.ceil(i.clientWidth),h=Math.ceil(i.clientHeight);return document.body.removeChild(i),[l,h]}function Clickable(){this.x=0,this.y=0,this.width=100,this.height=50,this.color="#FFFFFF",this.cornerRadius=10,this.strokeWeight=2,this.stroke="#000000",this.text="Press Me",this.textColor="#000000",this.textSize=12,this.textFont="sans-serif",this.textScaled=!1,this.updateTextSize=function(){if(this.textScaled)for(let t=this.height;t>0;t--)if(getTextBounds(this.text,this.textFont,t)[0]<=this.width&&getTextBounds(this.text,this.textFont,t)[1]<=this.height){this.textSize=t/2;break}},this.updateTextSize(),this.onHover=function(){},this.onOutside=function(){},this.onPress=function(){},this.onRelease=function(){},this.locate=function(t,e){this.x=t,this.y=e},this.resize=function(t,e){this.width=t,this.height=e,this.updateTextSize()},this.draw=function(){fill(this.color),stroke(this.stroke),strokeWeight(this.strokeWeight),rect(this.x,this.y,this.width,this.height,this.cornerRadius),fill(this.textColor),noStroke(),textAlign(CENTER,CENTER),textSize(this.textSize),textFont(this.textFont),text(this.text,this.x+this.width/2,this.y+this.height/2),mouseX>=this.x&&mouseY>=this.y&&mouseX<this.x+this.width&&mouseY<this.y+this.height&&(cl_lastHovered=this,mouseIsPressed&&!cl_mouseWasPressed&&(cl_lastClicked=this))},cl_clickables.push(this)}p5.prototype.runGUI=function(){for(var t=0;t<cl_clickables.length;++t)cl_lastHovered!=cl_clickables[t]&&cl_clickables[t].onOutside();null!=cl_lastHovered&&cl_lastClicked!=cl_lastHovered&&cl_lastHovered.onHover(),cl_mouseWasPressed||null==cl_lastClicked||cl_lastClicked.onPress(),cl_mouseWasPressed&&!mouseIsPressed&&null!=cl_lastClicked&&(cl_lastClicked==cl_lastHovered&&cl_lastClicked.onRelease(),cl_lastClicked=null),cl_lastHovered=null,cl_mouseWasPressed=mouseIsPressed},p5.prototype.registerMethod("post",p5.prototype.runGUI);
